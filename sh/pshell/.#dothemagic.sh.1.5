
cd ../../other/plots

#rename the files in a proper style
ls -l | head -n 7 | tail -n 6 | awk '{ print $9 ; }' | head -n 1 | xargs cat > Percentage_of_Infected_Population
ls -l | head -n 7 | tail -n 6 | awk '{ print $9 ; }' | head -n 2 | tail -n 1  | xargs cat > Epidemic_Curve
ls -l | head -n 7 | tail -n 6 | awk '{ print $9 ; }' | head -n 3 | tail -n 1 | xargs cat > Global_Estimated_Rate
ls -l | head -n 7 | tail -n 6 | awk '{ print $9 ; }' | head -n 4 | tail -n 1 | xargs cat > Local_Estimated_Rate
ls -l | head -n 7 | tail -n 6 | awk '{ print $9 ; }' | head -n 5 | tail -n 1 | xargs cat > P2P
ls -l | head -n 7 | tail -n 6 | awk '{ print $9 ; }' | head -n 6 | tail -n 1 | xargs cat > Unconstraint_Model

cd ../statistics
N=`ls -lt | head -n 2 | tail -n 1 | awk '{ print $9 ; }' | xargs cat | grep "Total population" | head -n 1 | awk '{ print $3; }'` 
p2=`ls -lt | head -n 2 | tail -n 1 | awk '{ print $9 ; }' | xargs cat | grep "P2P" | head -n 1 | awk '{ print $8; }'`
R=`ls -lt | head -n 2 | tail -n 1 | awk '{ print $9 ; }' | xargs cat | grep "immune" | head -n 1 | awk '{ print $6; }'`
I=`ls -lt | head -n 2 | tail -n 1 | awk '{ print $9 ; }' | xargs cat | grep "Initial" | head -n 1 | awk '{ print $4; }'`
L=$(echo `wc -l ../../GraphTopology.txt | awk '{ print $1; }'`/2 | bc)

echo "Graph size $N - Number of edges $L - Initial infected nodes $I - Initial immune nodes $R - P2P members $p2"

echo "set grid" > plot.plt
echo 'plot "Percentage_of_Infected_Population" with linespoints, "Epidemic_Curve" with linespoints, \
"Global_Estimated_Rate" with linespoints, "Local_Estimated_Rate" with linespoints, "Unconstraint_Model" with linespoints' >> plot.plt
echo "pause -1" >> plot.plt

mv ./plot.plt ../../other/plots/plot.plt